import{r as x,s as h,c as o,b as a,e as l,w as c,E as v,F as d,h as y,o as n,f as u,t as k,g as w,v as p}from"./index-K_sVz8sl.js";import{E as b,h as T}from"./http-BQI7cToF.js";import{M as E}from"./index-BMSQkwth.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"input"},M={class:"buttons"},B={ref:"content",class:"content"},H={key:0,style:{color:"blue"}},C=["innerHTML"],I={__name:"Assist",setup(L){const t=x({contentRef:h("content"),loading:!1,text:"",messages:[{role:"user",content:"你好"},{role:"ai",content:"你好"}]}),m=E();t.messages=[];function _(){t.text="",t.messages=[]}async function f(){if(!t.text){w.error("请输入内容");return}t.messages.push({role:"user",content:t.text}),await p(),t.contentRef.scrollTo({top:t.contentRef.scrollHeight,behavior:"smooth"}),t.loading=!0;const r=await T.post("/api/assist",{question:t.text});console.log(r);const e=r.data.data.replace(/<think>[\s\S]*?<\/think>/g,"");t.messages.push({role:"ai",content:m.render(e)}),await p(),t.contentRef.scrollTo({top:t.contentRef.scrollHeight,behavior:"smooth"}),t.text="",t.loading=!1}return(r,e)=>{const g=b,i=v;return n(),o(d,null,[e[3]||(e[3]=a("div",{class:"title"},"辅助诊疗",-1)),a("div",V,[l(g,{modelValue:t.text,"onUpdate:modelValue":e[0]||(e[0]=s=>t.text=s),rows:5,type:"textarea",placeholder:"请输入内容用于辅助诊疗"},null,8,["modelValue"])]),a("div",M,[l(i,{type:"primary",loading:t.loading,onClick:f},{default:c(()=>e[1]||(e[1]=[u("辅助诊疗")])),_:1,__:[1]},8,["loading"]),l(i,{type:"primary",onClick:_},{default:c(()=>e[2]||(e[2]=[u("清空内容")])),_:1,__:[2]})]),a("div",B,[(n(!0),o(d,null,y(t.messages,s=>(n(),o("div",{key:s.role},[s.role=="user"?(n(),o("div",H,k(s.content),1)):(n(),o("div",{key:1,style:{color:"red"},innerHTML:s.content},null,8,C))]))),128))],512)],64)}}},q=R(I,[["__scopeId","data-v-58202aef"]]);export{q as default};
