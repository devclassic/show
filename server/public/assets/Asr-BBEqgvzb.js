import{r as x,c as i,a as o,b as y,d,w as u,t as r,F as T,o as p,e as _}from"./index-DPuC23yX.js";import{E as v,a as n,h as w}from"./el-message-D-pduESO.js";import{a as c}from"./asr-5o_LRsin.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const g={class:"buttons"},k={class:"status"},B={key:0,class:"content"},C={__name:"Asr",setup(V){const t=x({btnRecordText:"开始收音",status:"",result:""});let a=!1;function m(){a?c.stop(async()=>{n.success("停止收音"),t.status="正在处理...",t.btnRecordText="开始收音",a=!1;const l=c.getWAVBlob(),s=new File([l],"audio.wav"),e=new FormData;e.append("file",s);const b=await w.post("/api/asr",e,{headers:{"Content-Type":"multipart/form-data"}});t.status="",t.result=b.data.data[0].text}):c.start(()=>{n.success("开始收音"),t.btnRecordText="停止收音",t.status="正在收音...",a=!0},()=>{n.error("收音错误"),t.status="",t.btnRecordText="开始收音",a=!1})}function f(){t.result=""}return(l,s)=>{const e=v;return p(),i(T,null,[s[1]||(s[1]=o("div",{class:"title"},"语音识别",-1)),o("div",g,[d(e,{type:"primary",onClick:m},{default:u(()=>[_(r(t.btnRecordText),1)]),_:1}),d(e,{type:"primary",onClick:f},{default:u(()=>s[0]||(s[0]=[_("清空内容")])),_:1,__:[0]}),o("span",k,r(t.status),1)]),t.result?(p(),i("div",B,r(t.result),1)):y("",!0)],64)}}},A=R(C,[["__scopeId","data-v-1d967cb2"]]);export{A as default};
