import{r as b,aC as E,X as v,c as r,a as p,d as s,w as o,F as f,o as d,b as w,e as m,as as x,t as V}from"./index-DFBKAQJf.js";import{E as C,d as M}from"./el-form-item-BXT43jCk.js";import{E as h}from"./el-input-Bt1zv1Kq.js";import{a as F,E as B,h as I}from"./http-DSFHMeZK.js";import{M as L}from"./index-BMSQkwth.js";/* empty css                   */import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={type:"file",ref:"file",class:"file",multiple:""},D={key:0,class:"files"},A=["innerHTML"],H={__name:"Analysis",setup(S){const u=L(),e=b({file:E("file"),filenames:[],prompt:"",loading:!1,result:""});v(()=>{e.file.addEventListener("change",a=>{const t=a.target.files;if(t.length>10){F.error("最多上传10个文件"),a.target.value="",e.filenames=[];return}e.filenames=[];for(const l of t)e.filenames.push(l.name)})});function c(){e.file.click()}async function _(){e.loading=!0;const a=new FormData;a.append("prompt",e.prompt);for(const n of e.file.files)a.append("files",n);const l=(await I.post("/api/analysis",a)).data.data.data.outputs.text.replace(/<think>[\s\S]*?<\/think>/g,"");e.result=u.render(l),e.loading=!1}function g(){e.file.value="",e.filenames=[],e.prompt="",e.result=""}return(a,t)=>{const l=B,n=M,y=h,k=C;return d(),r(f,null,[t[4]||(t[4]=p("div",{class:"title"},"数据分析",-1)),s(k,{"label-width":"auto",class:"form"},{default:o(()=>[s(n,{label:"文件"},{default:o(()=>[p("input",T,null,512),s(l,{type:"primary",disabled:e.loading,onClick:c},{default:o(()=>t[1]||(t[1]=[m("上传文件")])),_:1,__:[1]},8,["disabled"]),s(l,{type:"primary",loading:e.loading,onClick:_},{default:o(()=>t[2]||(t[2]=[m("分析")])),_:1,__:[2]},8,["loading"]),s(l,{type:"primary",disabled:e.loading,onClick:g},{default:o(()=>t[3]||(t[3]=[m("重置")])),_:1,__:[3]},8,["disabled"]),e.filenames.length?(d(),r("div",D,[(d(!0),r(f,null,x(e.filenames,i=>(d(),r("div",{key:i,class:"file-item"},V(i),1))),128))])):w("",!0)]),_:1}),s(n,{label:"提示词"},{default:o(()=>[s(y,{modelValue:e.prompt,"onUpdate:modelValue":t[0]||(t[0]=i=>e.prompt=i),rows:5,type:"textarea",placeholder:"请输入症状用于智能导诊"},null,8,["modelValue"])]),_:1})]),_:1}),p("div",{class:"result",innerHTML:e.result},null,8,A)],64)}}},J=N(H,[["__scopeId","data-v-4209ec0e"]]);export{J as default};
