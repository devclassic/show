import{r as v,s as E,x as b,g as w,c as r,b as i,e as a,w as o,i as k,F as f,h as V,o as p,j as C,E as F,f as u,y as I,t as B}from"./index-K_sVz8sl.js";import{h as c,E as h}from"./http-BQI7cToF.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"input"},M={type:"file",ref:"file",class:"file",accept:"image/*",multiple:""},T={class:"result"},j={__name:"Image",setup(z){const e=v({loading:!1,file:E("file"),text:"",messages:[]});b(()=>{m()});function _(){e.file.click()}async function g(){e.loading=!0,e.messages.push({role:"user",content:e.text});const l=new FormData;for(let s=0;s<e.file.files.length;s++)l.append("files",e.file.files[s]);l.append("text",e.text),e.text="";const t=await c.post("/api/image",l);e.messages.push({role:"assistant",content:t.data.data}),e.loading=!1,e.file.value=""}async function m(){e.messages=[],e.file.value="",e.text="";const l=await c.post("/api/image/reset");console.log(l.data),w.success("重置成功")}return(l,t)=>{const s=F,d=C,x=h,y=k;return p(),r(f,null,[t[4]||(t[4]=i("div",{class:"title"},"医学影像",-1)),i("div",N,[a(y,{"label-width":"auto"},{default:o(()=>[a(d,{label:"影像"},{default:o(()=>[i("input",M,null,512),a(s,{type:"primary",onClick:_},{default:o(()=>t[1]||(t[1]=[u("上传图片")])),_:1,__:[1]}),a(s,{type:"primary",onClick:g,loading:e.loading},{default:o(()=>t[2]||(t[2]=[u("提交")])),_:1,__:[2]},8,["loading"]),a(s,{type:"primary",onClick:m},{default:o(()=>t[3]||(t[3]=[u("重置")])),_:1,__:[3]})]),_:1}),a(d,{label:"提示词"},{default:o(()=>[a(x,{modelValue:e.text,"onUpdate:modelValue":t[0]||(t[0]=n=>e.text=n),rows:5,type:"textarea",placeholder:"请输入症状用于智能导诊"},null,8,["modelValue"])]),_:1})]),_:1})]),i("div",T,[(p(!0),r(f,null,V(e.messages,n=>(p(),r("div",{class:I([{user:n.role==="user",assistant:n.role==="assistant"},"item"])},B(n.content),3))),256))])],64)}}},U=D(j,[["__scopeId","data-v-41d77eb4"]]);export{U as default};
