import{r as p,aC as f,X as _,c as m,a as e,d as g,w as h,t as v,F as y,o as k,e as w}from"./index-BycwOL8j.js";import{h as o,E as M}from"./http-CcM6KCZc.js";import{M as b}from"./index-BMSQkwth.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"buttons"},x={type:"file",class:"file",ref:"file",accept:"video/mp4"},L={class:"status"},B=["innerHTML"],E=["innerHTML"],C={__name:"Heart",setup(D){const l=b(),t=p({result:"",file:f("file"),loading:!1,status:"",suggestion:""});_(()=>{t.file.addEventListener("change",async()=>{if(t.file.files.length===0)return;t.loading=!0,t.status="正在分析...";const n=new FormData;n.append("file",t.file.files[0]);let s=await o.post("/api/heart",n),a="";for(const[u,d]of Object.entries(s.data.data))a+=`<span style="color:blue">${u}</span>：<span style="color:red">${d}</span><br>`;t.result=a,t.status="正在生成诊疗建议...";const i=`
      <result>${t.result}</result>
      <result>为心脏超声检测结果，根据超声检测结果，生成诊疗建议。
      `;s=await o.post("/api/form",{prompt:i});const c=s.data.data.replace(/<think>[\s\S]*?<\/think>/g,"");t.suggestion=l.render(c),t.status="",t.loading=!1})});const r=async()=>{t.file.click()};return(n,s)=>{const a=M;return k(),m(y,null,[s[1]||(s[1]=e("div",{class:"title"},"心脏超声",-1)),e("div",T,[e("input",x,null,512),g(a,{type:"primary",loading:t.loading,onClick:r,class:"upload"},{default:h(()=>s[0]||(s[0]=[w(" 上传超声视频 ")])),_:1,__:[0]},8,["loading"]),e("span",L,v(t.status),1)]),e("div",{innerHTML:t.result,class:"result"},null,8,B),e("div",{innerHTML:t.suggestion,class:"suggestion"},null,8,E)],64)}}},I=H(C,[["__scopeId","data-v-9af43fe8"]]);export{I as default};
